Object.defineProperty(exports, "__esModule", { value: true });
var plugins_1 = require("../core/plugins");
var lists_1 = require("../utils/lists");
var constants_1 = require("../utils/constants");
var insert_1 = require("./insert");
exports.set = function (model, options, ctx) {
    var pluginNames = Object.keys(plugins_1.plugins);
    var opts2 = lists_1.list(options).map(function (opts) {
        var at = opts.at || model.cursor;
        var opt2 = {};
        for (var name in opts) {
            if (lists_1.includes(pluginNames, name)) {
                var props = opts[name];
                var props2 = {};
                for (var propName in props) {
                    var value = props[propName];
                    props2[propName] = [constants_1._, value];
                }
                opt2[name] = props2;
            }
            else {
                opt2[name] = opts[name];
            }
        }
        opt2.from = at - 0.000000001;
        opt2.to = at;
        return opt2;
    });
    insert_1.insert(model, opts2, ctx);
};
