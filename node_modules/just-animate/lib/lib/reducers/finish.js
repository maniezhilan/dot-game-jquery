Object.defineProperty(exports, "__esModule", { value: true });
var timeloop_1 = require("../core/timeloop");
var constants_1 = require("../utils/constants");
var destroy_1 = require("./destroy");
var update_1 = require("./update");
var actions_1 = require("../actions");
exports.finish = function (model, _data, ctx) {
    model.round = 0;
    model.state = constants_1.S_PAUSED;
    if (!model.yoyo) {
        model.time = model.rate < 0 ? 0 : model.duration;
    }
    timeloop_1.loopOff(model.id);
    update_1.update(model, constants_1._, ctx);
    ctx.trigger(actions_1.FINISH);
    if (model.destroy) {
        destroy_1.destroy(model, constants_1._, ctx);
    }
};
